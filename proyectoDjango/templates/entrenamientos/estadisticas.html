{% load static %}
{% include 'common/header2.html' %}


{% block content %}
<style>
    .carta-stats {
        border: 1px solid #f00a0a;
        border-radius: 10px;
    }
    .grafico-container {
    position: relative;
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
    padding: 1rem;
}

.grafico-container::before {
    content: "";
    display: block;
    padding-top: 60%; 
}

#grafico-container canvas,
.grafico-container canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100% ;
    height: 100% ;
    background-color: #1e1e1e; /* fondo oscuro para que las líneas blancas se vean */
    border-radius: 12px;
}

</style>
<section class="estadisticas-container">
    <h2>Estadísticas de Entrenamiento</h2>

    <div>
        <label for="ejercicioSelect">Selecciona un ejercicio:</label>
        <select id="ejercicioSelect"></select>
    </div>

    <!-- Switch de métricas -->
    <div style="margin: 15px 0;">
        <button id="btnPeso" class="switch-btn active">Peso Medio</button>
        <button id="btnTotal" class="switch-btn">Peso Total</button>
    </div>

    <div class="grafico-container">
        <canvas id="pesoChart"></canvas>
    </div>


</section>
<section class="container my-5">
    <div class="row mt-4">
    {% if mejor_ejercicio %}
    <div class="col-md-4">
        <div class="card  carta-stats mb-3">
        <h4 class="mt-3">Mejor ejercicio</h4>
        <div class="card-body ">
            <h5 class="card-title">{{ mejor_ejercicio }}</h5>
            <p class="card-text">Mejora: <strong>+{{ mejora_ejercicio }} kg</strong></p>
        </div>
        </div>
    </div>
    {% endif %}

    {% if musculo_mas_mejorado %}
    <div class="col-md-4">
        <div class="card carta-stats mb-3">
        <h4 class="mt-3">Músculo más mejorado</h4>
        <div class="card-body ">
            <h5 class="card-title">{{ musculo_mas_mejorado }}</h5>
            <p class="card-text">Mejora total: <strong>+{{ mejora_musculo }} kg</strong></p>
        </div>
        </div>
    </div>
    {% endif %}

    {% if ejercicio_mas_frecuente %}
    <div class="col-md-4">
        <div class="card carta-stats mb-3">
        <h4 class="mt-3">Ejercicio más frecuente</h4>
        <div class="card-body ">
            <h5 class="card-title">{{ ejercicio_mas_frecuente }}</h5>
            <p class="card-text">Entrenado <strong>{{ frecuencia_ejercicio }}</strong> veces</p>
        </div>
        </div>
    </div>
    {% endif %}
    </div>

</section>


{{ datos|json_script:"datos-entrenamiento" }}

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{% static 'js/estadisticas.js' %}"></script>
{% endblock %}
{% include 'common/footer.html' %}
